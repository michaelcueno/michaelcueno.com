---
layout: page
---

<div>
  <div id='toplevel'></div>
  <canvas id="myChart"></canvas>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@^2"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-moment@^1"></script>

<script>
  const API_URL='https://kr8tnnbh12.execute-api.us-west-2.amazonaws.com/prod/boulder';

  function generateChart(response) {
      const { Items } = JSON.parse(response);
      document.getElementById('toplevel').innerHTML = 
`
  Fremont: ${Items[Items.length-1].fremont}
<br />
  Upper Walls: ${Items[Items.length-1].upper_walls}
`;

      const data = {
          datasets: [{
              label: 'Fremont',
              backgroundColor: 'rgb(255, 99, 132)',
              borderColor: 'rgb(255, 99, 132)',
              data: Items.map(item => ({
                  x: item.timestamp,
                  y: item.fremont,
              })),
            }, {
              label: 'upperwalls',
              backgroundColor: 'rgb(149, 52, 235)',
              borderColor: 'rgb(149, 52, 235)',
              data: Items.map(item => ({
                  x: item.timestamp,
                  y: item.upper_walls,
              })),
            }]
        };

      const config = {
          type: 'line',
          data: data,
          options: {
              scales: {
                  x: {
                      type: 'timeseries',
                      time: {
                      }
                    }
                }
            }
        };

      const myChart = new Chart(
        document.getElementById('myChart'),
        config
      );
    }

  const xhttp = new XMLHttpRequest();
  xhttp.open("GET", API_URL, true);
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
        generateChart(this.responseText);
    }
  };
  xhttp.send();
</script>

